{% extends 'base.html' %}
{% load static %}
{% block title %}Profile: {{ profile.username }}{% endblock %}

{% block content %}
    <div class="dark:bg-zinc-800 max-w-3xl mx-auto md:max-w-3xl pb-1 mt-10 bg-white mb-4 rounded-xl mt-20">
        <div class="flex flex-wrap justify-center">
            <div class="w-full h-20 rounded-t-xl bg-gray-500 flex justify-center">
                <div class="relative">
                    <img src="{{ profile.image.url }}" class="shadow-xl rounded-full align-middle absolute -m-16 -ml-20 lg:-ml-16 max-w-[150px]" alt="profile-image"/>
                </div>
            </div>
            <div class="w-full font-bold text-center">
                <span class="text-2xl text-slate-800">{{ profile.username }}</span>
            </div>
            <div class="w-full font-bold text-center">
                <div class="flex justify-center lg:pt-4 pt-6 pb-0">
                    <div class="p-3 text-center">
                        <span class="text-xl block uppercase tracking-wide text-slate-600">{{ posts.count }}</span>
                        <span class="text-sm text-slate-800">Posts</span>
                    </div>
                    <div class="p-3 text-center">
                        <span class="text-xl block uppercase tracking-wide text-slate-600">2,454</span>
                        <span class="text-sm text-slate-800">Followers</span>
                    </div>
                    <div class="p-3 text-center">
                        <span class="text-xl  block uppercase tracking-wide text-slate-600">564</span>
                        <span class="text-sm text-slate-800">Following</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center font-bold">
            {% if profile.first_name %}
                <h3 class="text-4xl text-slate-900 leading-normal mb-1">{{ profile.first_name }}</h3>
            {% endif %}
            {% if profile.bio %}
                <div class="text-xs mt-0 mb-2 text-slate-400">
                    <i class="fas fa-map-marker-alt mr-2 text-slate-600"></i>{{ profile.basic.bio }}
                </div>
            {% endif %}
            <div class="py-2 mb-4 border-slate-200 text-center">
                <div class="flex flex-wrap justify-center">
                    {% if profile.basic.location %}
                        <div class="w-fill px-4">
                            <p class="font-light leading-relaxed text-slate-600 ">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 m-auto h-5">
                                    <path fill-rule="evenodd" d="M9.69 18.933l.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 00.281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 103 9c0 3.492 1.698 5.988 3.355 7.584a13.731 13.731 0 002.273 1.765 11.842 11.842 0 00.976.544l.062.029.018.008.006.003zM10 11.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" clip-rule="evenodd"></path>
                                </svg>
                                {{ profile.basic.location }}
                            </p>
                        </div>
                    {% endif %}
                    {% if profile.display_email %}
                        <div class="w-fill px-4">
                            <p class="font-light leading-relaxed text-slate-600 ">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 m-auto h-5">
                                    <path fill-rule="evenodd" d="M5.404 14.596A6.5 6.5 0 1116.5 10a1.25 1.25 0 01-2.5 0 4 4 0 10-.571 2.06A2.75 2.75 0 0018 10a8 8 0 10-2.343 5.657.75.75 0 00-1.06-1.06 6.5 6.5 0 01-9.193 0zM10 7.5a2.5 2.5 0 100 5 2.5 2.5 0 000-5z" clip-rule="evenodd"></path>
                                </svg>
                                {{ profile.email }}
                            </p>
                        </div>
                    {% endif %}
                    {% if profile.basic.site %}
                        <div class="w-fill px-4">
                            <p class="font-light leading-relaxed text-slate-600 ">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 m-auto h-5">
                                    <path d="M16.555 5.412a8.028 8.028 0 00-3.503-2.81 14.899 14.899 0 011.663 4.472 8.547 8.547 0 001.84-1.662zM13.326 7.825a13.43 13.43 0 00-2.413-5.773 8.087 8.087 0 00-1.826 0 13.43 13.43 0 00-2.413 5.773A8.473 8.473 0 0010 8.5c1.18 0 2.304-.24 3.326-.675zM6.514 9.376A9.98 9.98 0 0010 10c1.226 0 2.4-.22 3.486-.624a13.54 13.54 0 01-.351 3.759A13.54 13.54 0 0110 13.5c-1.079 0-2.128-.127-3.134-.366a13.538 13.538 0 01-.352-3.758zM5.285 7.074a14.9 14.9 0 011.663-4.471 8.028 8.028 0 00-3.503 2.81c.529.638 1.149 1.199 1.84 1.66zM17.334 6.798a7.973 7.973 0 01.614 4.115 13.47 13.47 0 01-3.178 1.72 15.093 15.093 0 00.174-3.939 10.043 10.043 0 002.39-1.896zM2.666 6.798a10.042 10.042 0 002.39 1.896 15.196 15.196 0 00.174 3.94 13.472 13.472 0 01-3.178-1.72 7.973 7.973 0 01.615-4.115zM10 15c.898 0 1.778-.079 2.633-.23a13.473 13.473 0 01-1.72 3.178 8.099 8.099 0 01-1.826 0 13.47 13.47 0 01-1.72-3.178c.855.151 1.735.23 2.633.23zM14.357 14.357a14.912 14.912 0 01-1.305 3.04 8.027 8.027 0 004.345-4.345c-.953.542-1.971.981-3.04 1.305zM6.948 17.397a8.027 8.027 0 01-4.345-4.345c.953.542 1.971.981 3.04 1.305a14.912 14.912 0 001.305 3.04z"></path>
                                </svg>
                                {{ profile.basic.site }}</p>
                            </div>
                    {% endif %}
                    <div class="w-fill px-4">
                        <p class="font-light leading-relaxed text-slate-600">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 m-auto h-5">
                                <path d="M6.75.98l-.884.883a1.25 1.25 0 101.768 0L6.75.98zM13.25.98l-.884.883a1.25 1.25 0 101.768 0L13.25.98zM10 .98l.884.883a1.25 1.25 0 11-1.768 0L10 .98zM7.5 5.75a.75.75 0 00-1.5 0v.464c-1.179.305-2 1.39-2 2.622v.094c.1-.02.202-.038.306-.051A42.869 42.869 0 0110 8.5c1.93 0 3.83.129 5.694.379.104.013.206.03.306.051v-.094c0-1.232-.821-2.317-2-2.622V5.75a.75.75 0 00-1.5 0v.318a45.645 45.645 0 00-1.75-.062V5.75a.75.75 0 00-1.5 0v.256c-.586.01-1.17.03-1.75.062V5.75zM4.505 10.365A41.377 41.377 0 0110 10c1.863 0 3.697.124 5.495.365C16.967 10.562 18 11.838 18 13.28v.693a3.72 3.72 0 01-1.665-.393 5.222 5.222 0 00-4.67 0 3.722 3.722 0 01-3.33 0 5.222 5.222 0 00-4.67 0A3.72 3.72 0 012 13.972v-.693c0-1.441 1.033-2.716 2.505-2.914zM15.665 14.921a5.22 5.22 0 002.335.551V16.5a1.5 1.5 0 01-1.5 1.5h-13A1.5 1.5 0 012 16.5v-1.028c.8 0 1.6-.183 2.335-.551a3.722 3.722 0 013.33 0c1.47.735 3.2.735 4.67 0a3.722 3.722 0 013.33 0z"></path>
                            </svg>
                            Joined on {{ profile.date_joined|date }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
        {% if profile.work.work and profile.work.education %}
            <div class="py-6 border-t border-slate-200 text-center">
            <div class="w-full font-bold text-center">
                <div class="flex flex-wrap justify-around">
                    {% if profile.work.work %}
                        <div class="p-3 text-center">
                            <span class="text-md block uppercase tracking-wide text-slate-600">{{ profile.work.work }}</span>
                            <span class="text-sm text-slate-800">Work</span>
                        </div>
                    {% endif %}
                    {% if profile.work.education %}
                        <div class="p-3 text-center">
                            <span class="text-md block uppercase tracking-wide text-slate-600">{{ profile.work.education }}</span>
                            <span class="text-sm text-slate-800">Education</span>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
    <div class="grid max-w-3xl mx-auto grid-cols-1 xl:grid-cols-7 2xl:grid-cols-7 gap-4">
        <div class="h-fit xl:col-span-2 2xl:col-span-2 dark:bg-gray-900">
            {% if profile.coding.current %}
                <nav class="mb-2 rounded-md bg-white">
                     <ul class="text-sm font-medium text-gray-900 border-gray-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                         <li class="w-full p-3 border-b border-gray-200 rounded-t-lg dark:border-gray-600">Currently learning</li>
                         <li class="w-full p-3  dark:border-gray-600">{{ profile.coding.current }}</li>
                     </ul>
                </nav>
            {% endif %}

            {% if profile.coding.skills %}
                <nav class="mb-2 rounded-md bg-white">
                 <ul class="text-sm font-medium text-gray-900 border-gray-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                     <li class="w-full p-3 border-b border-gray-200 rounded-t-lg dark:border-gray-600">Skills/Languages</li>
                     <li class="w-full p-3  dark:border-gray-600">{{ profile.coding.skills }}</li>
                 </ul>
             </nav>
            {% endif %}

            {% if profile.work.work %}
                <nav class="mb-2 rounded-md bg-white">
                 <ul class="text-sm font-medium text-gray-900 border-gray-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                     <li class="w-full p-3 border-b border-gray-200 rounded-t-lg dark:border-gray-600">Work</li>
                     <li class="w-full p-3  dark:border-gray-600">{{ profile.work.work }}</li>
                 </ul>
             </nav>
            {% endif %}

            {% if profile.work.education %}
                <nav class="mb-2 rounded-md bg-white">
                 <ul class="text-sm font-medium text-gray-900 border-gray-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                     <li class="w-full p-3 border-b border-gray-200 rounded-t-lg dark:border-gray-600">Education</li>
                     <li class="w-full p-3  dark:border-gray-600">{{ profile.work.education }}</li>
                 </ul>
            </nav>
            {% endif %}

            <nav class="mb-2 rounded-md bg-white">
                 <ul class="text-sm font-medium text-gray-900 border-gray-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                     <li class="w-full p-3 dark:border-gray-600">{{ posts.count }} posts published</li>
                     <li class="w-full p-3 dark:border-gray-600">{{ comments.count }} comments written</li>
                     <li class="w-full p-3 dark:border-gray-600">0 tags followed</li>
                 </ul>
            </nav>
        </div>
        <div class="rounded-lg xl:col-span-5 2xl:col-span-5 dark:bg-gray-900">
            {% if posts.exists %}
                {% for post in posts %}
                    <div class="max-w-full bg-white overflow-hidden mb-3 bg-white rounded-lg shadow-md dark:bg-gray-800">
                        <div class="p-6 pb-2">
                            <div class="">
                                <div class="flex items-center">
                                    <div class="flex items-center">
                                        <img class="object-cover h-10 w-10 rounded-full" src="{{ post.profile.image.url }}" alt="Avatar">
                                        <a href="{% url 'profile' post.profile.username %}" class="mx-2 font-semibold text-gray-700 dark:text-gray-200" tabindex="0" role="link">{{ post.profile.username }}</a>
                                    </div>
                                    <span class="mx-1 text-xs text-gray-600 dark:text-gray-300">{{ post.created|timesince }} ago</span>
                                </div>
                            </div>
                            <div>
                                <a href="{% url 'post' post.profile.username post.pk %}" class="block mt-2 mx-10 mb-3 text-4xl font-semibold text-gray-800 transition-colors duration-300 transform dark:text-white hover:text-gray-600 hover:underline" tabindex="0" role="link">{{ post.title }}</a>
                                <div class="mx-4">
                                    {% for tag in post.tags.all %}
                                        <a href="" class="text-sm ml-6 me-6 text-{{ tag.get_color_display }}-600 dark:text-{{ tag.get_color_display }}-500 font-semibold text-gray-800 transition-colors duration-300 transform dark:text-white hover:text-gray-600 hover:underline"># {{ tag.name }}</a>
                                    {% endfor %}
                                </div>
                            </div>
                            <nav class="m-2 mx-5">
                                <a type="button" class="text-gray bg-gray hover:bg-blue-100 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700">Dark</a>
                                <a type="button" class="text-gray bg-gray hover:bg-blue-100 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700">Dark</a>
                            </nav>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
{% endblock %}